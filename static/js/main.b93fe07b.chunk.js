(this["webpackJsonpredux-ts"]=this["webpackJsonpredux-ts"]||[]).push([[0],{39:function(t,e,n){},41:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);var c,r=n(2),a=n(1),s=n.n(a),o=n(24),i=n.n(o),j=(n(39),n(13)),l=n.n(j),u=n(20),d=(n(41),n(17)),b=n(19),O=n(52),h=n(53),x=n(54),p=n(55),f=n(56),m=n(9),v=n(14);!function(t){t.IDLE="idle",t.LOADING="loading",t.READY="ready",t.ERROR="error"}(c||(c={}));var g=Object(v.c)({sortComparer:function(t,e){return e.id-t.id}}),y=g.getInitialState({postsStatus:c.IDLE}),C=Object(v.b)("Posts/fetchPosts",function(){var t=Object(u.a)(l.a.mark((function t(e,n){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://jsonplaceholder.typicode.com/posts/?userId=1");case 2:return c=t.sent,t.next=5,c.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),S=Object(v.b)("Posts/updatePost",function(){var t=Object(u.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://jsonplaceholder.typicode.com/posts/".concat(e.id),{method:"PUT",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}});case 2:return n=t.sent,t.next=5,n.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),k=Object(v.d)({name:"Posts",initialState:y,reducers:{addPost:function(t,e){var n=t.ids.reduce((function(t,e){return t>e?t:e}));e.payload.id=+n+1,g.addOne(t,e.payload)},deletePost:function(t,e){g.removeOne(t,e.payload)},updatePost:function(t,e){g.upsertOne(t,e.payload)}},extraReducers:function(t){t.addCase(C.pending,(function(t){t.postsStatus=c.LOADING})).addCase(C.fulfilled,(function(t,e){t.postsStatus=c.READY,g.upsertMany(t,e.payload)})).addCase(S.fulfilled,(function(t,e){t.postsStatus=c.READY,g.upsertOne(t,e.payload)}))}}),N=k.actions,w=N.addPost,E=N.deletePost,A=(N.updatePost,g.getSelectors((function(t){return t.posts}))),D=function(t){var e=t.setCreationMode,n=Object(m.b)(),c={id:0,title:"",body:""},s=Object(a.useState)(c),o=Object(d.a)(s,2),i=o[0],j=o[1];return Object(r.jsx)("div",{children:Object(r.jsxs)(O.a,{children:[Object(r.jsxs)(h.a,{children:[Object(r.jsx)(x.a,{for:"title",children:"Title"}),Object(r.jsx)(p.a,{type:"text",name:"title",placeholder:"Enter title",value:i.title,onChange:function(t){return j((function(e){return Object(b.a)(Object(b.a)({},e),{},{title:t.target.value})}))}})]}),Object(r.jsxs)(h.a,{children:[Object(r.jsx)(x.a,{for:"text",children:"Text"}),Object(r.jsx)(p.a,{type:"text",name:"text",placeholder:"Enter text",value:i.body,onChange:function(t){return j((function(e){return Object(b.a)(Object(b.a)({},e),{},{body:t.target.value})}))}})]}),Object(r.jsx)(f.a,{onClick:function(){n(w(i)),e(!1),j((function(){return c}))},color:"primary",children:"Add post"})," "," ",Object(r.jsx)(f.a,{onClick:function(){return e(!1)},color:"dark",children:"Cancel"})]})})},I=n(57),P=n(58),R=n(59),L=n(7),B=function(t){var e=t.post,n=Object(a.useState)(e),c=Object(d.a)(n,2),s=c[0],o=c[1],i=Object(L.g)(),j=Object(m.b)();return Object(a.useEffect)((function(){o(e)}),[e]),Object(r.jsx)(I.a,{className:"border-0 m-2",body:!0,color:"light",children:Object(r.jsxs)(P.a,{children:[Object(r.jsx)(R.a,{tag:"h5",children:s.title}),Object(r.jsx)(R.a,{tag:"p",children:s.body}),Object(r.jsxs)(f.a,{onClick:function(){return j(E(e.id))},color:"danger",children:["Delete"," "]})," ",Object(r.jsx)(f.a,{onClick:function(){i.push("post/".concat(e.id))},children:"Edit post"})]})})},M=n(60),T=function(){return Object(r.jsx)(M.a,{type:"grow",color:"dark"})};function Y(){var t=Object(m.c)((function(t){return t.posts.postsStatus})),e=Object(m.c)((function(t){return A.selectAll(t)})),n=Object(a.useState)(!1),s=Object(d.a)(n,2),o=s[0],i=s[1],j=e.map((function(t){return Object(r.jsx)(B,{post:t},t.id)}));return Object(r.jsxs)("div",{children:[!o&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(f.a,{onClick:function(){return i(!0)},color:"primary",children:"Create new post"})}),o&&Object(r.jsx)("div",{className:"mb-2",children:Object(r.jsx)(D,{setCreationMode:i})}),Object(r.jsx)("div",{className:"mb-2",children:t===c.LOADING?T():j})]})}var G=n(61),F=n(62),J=n(63),W=n(64),z=n(65),U=n(15),$=n(31),q=n(32),H=Object(v.c)(),K=H.getInitialState({loadingStatus:c.IDLE}),Q=Object(v.b)("fetchPostComments",function(){var t=Object(u.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://jsonplaceholder.typicode.com/comments?postId=".concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),V=Object(v.d)({name:"comments",initialState:K,reducers:{},extraReducers:function(t){t.addCase(Q.pending,(function(t){t.loadingStatus=c.LOADING})),t.addCase(Q.fulfilled,(function(t,e){H.upsertMany(t,e.payload),t.loadingStatus=c.READY}))}}),X=H.getSelectors((function(t){return t.comments})),Z=Object(v.a)({reducer:{posts:k.reducer,comments:V.reducer}}),_=function(){return Object(m.b)()},tt=function(){var t=Object(L.g)(),e=_();return Object(r.jsxs)("div",{children:[Object(r.jsx)(f.a,{onClick:function(){return t.goBack()},children:Object(r.jsx)($.a,{icon:q.a,size:"1x"})})," ",Object(r.jsx)(f.a,{onClick:function(){e(C())},className:"",children:Object(r.jsx)($.a,{icon:q.b,size:"1x"})}),Object(r.jsx)("br",{})]})};function et(){var t=Object(m.c)((function(t){return A.selectIds(t)}));return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(G.a,{color:"light",expand:"md",className:"mb-3",children:[Object(r.jsxs)(F.a,{className:"mr-auto",navbar:!0,children:[Object(r.jsx)(J.a,{className:"mr-auto",children:Object(r.jsx)(W.a,{tag:U.b,to:"/posts",children:"Posts"})}),Object(r.jsx)(J.a,{className:"mr-auto",children:Object(r.jsx)(W.a,{tag:U.b,to:"/about",children:"About"})})]}),Object(r.jsx)(tt,{}),Object(r.jsxs)(z.a,{className:"pl-3",children:["Total posts: ",t.length]})]})})}var nt=n(70),ct=n(71),rt=n(72),at=n(66),st=n(68),ot=n(67),it=function(){var t=Object(L.h)().id,e=Object(m.c)((function(e){return X.selectAll(e).filter((function(e){return e.postId===+t}))})),n=_(),s=Object(m.c)((function(t){return t.comments.loadingStatus}));Object(a.useEffect)((function(){n(Q(t))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsxs)("h4",{className:"",children:["Comments ",s!==c.READY&&T()]}),e.map((function(t){return Object(r.jsx)(I.a,{body:!0,className:"text-left m-2 border-0",color:"light",children:Object(r.jsxs)(P.a,{children:[Object(r.jsx)(at.a,{tag:"h6",children:t.name}),Object(r.jsx)(ot.a,{children:t.email}),Object(r.jsx)(R.a,{children:t.body})]})})}))]})},jt=function(){var t=Object(L.h)().id,e=Object(m.c)((function(e){return A.selectById(e,t)})),n=_(),c=Object(a.useState)(!1),s=Object(d.a)(c,2),o=s[0],i=s[1],j=Object(a.useState)(""),l=Object(d.a)(j,2),u=l[0],O=l[1],h=Object(a.useState)(""),x=Object(d.a)(h,2),v=x[0],g=x[1];Object(a.useEffect)((function(){O((null===e||void 0===e?void 0:e.title)||""),g((null===e||void 0===e?void 0:e.body)||"")}),[e]);return Object(r.jsxs)("div",{children:[Object(r.jsxs)(I.a,{className:"bg-white mb-4 text-left",children:[Object(r.jsxs)(st.a,{children:["Post ",t]}),o?Object(r.jsxs)(P.a,{children:[Object(r.jsx)(p.a,{className:"m-2",value:u,onChange:function(t){return O(t.target.value)},children:null===e||void 0===e?void 0:e.title}),Object(r.jsx)(p.a,{className:"m-2",value:v,onChange:function(t){return g(t.target.value)},children:null===e||void 0===e?void 0:e.body}),Object(r.jsx)(f.a,{className:"m-2",color:"primary",onClick:function(){n(S(Object(b.a)(Object(b.a)({},e),{},{title:u,body:v}))),i(!1)},children:"Save"}),Object(r.jsx)(f.a,{className:"m-2",color:"dark",onClick:function(){i(!1),O(null===e||void 0===e?void 0:e.title),g(null===e||void 0===e?void 0:e.body)},children:"Cancel"})]}):Object(r.jsxs)(P.a,{children:[Object(r.jsx)(at.a,{tag:"h5",children:null===e||void 0===e?void 0:e.title}),Object(r.jsx)(R.a,{children:null===e||void 0===e?void 0:e.body}),Object(r.jsx)(f.a,{color:"primary",onClick:function(){return i(!0)},children:"Edit"})]})]}),Object(r.jsx)(it,{})]})},lt=n(69),ut=function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"React playground"}),Object(r.jsx)("p",{children:"Welcome to my react playground"}),Object(r.jsxs)("p",{children:["Built using",Object(r.jsx)(lt.a,{children:"react"}),Object(r.jsx)(lt.a,{children:"typescript"}),Object(r.jsx)(lt.a,{children:"redux"}),Object(r.jsx)(lt.a,{children:"redux toolkit"}),Object(r.jsx)(lt.a,{children:"reactstrap"})]}),Object(r.jsx)("footer",{children:"Dmitry Avgustis 2021"})]})};var dt=function(){var t=_(),e=Object(m.c)((function(t){return t.posts.postsStatus}));return Object(a.useEffect)((function(){Object(u.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==c.IDLE){n.next=3;break}return n.next=3,t(C());case 3:case"end":return n.stop()}}),n)})))()}),[e]),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(et,{}),Object(r.jsx)(nt.a,{className:"container container-lg",children:Object(r.jsx)(ct.a,{children:Object(r.jsx)(rt.a,{className:"",children:Object(r.jsxs)(L.d,{children:[Object(r.jsx)(L.b,{exact:!0,path:"/",children:Object(r.jsx)(L.a,{to:"/about"})}),Object(r.jsx)(L.b,{path:"/posts",component:Y}),Object(r.jsx)(L.b,{exact:!0,path:"/post/:id",component:jt}),Object(r.jsx)(L.b,{path:"/about",component:ut})]})})})}),Object(r.jsxs)("footer",{children:["Dmitry Avgustis 2021 ","Production"]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(50);i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(U.a,{children:Object(r.jsx)(m.a,{store:Z,children:Object(r.jsx)(dt,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.b93fe07b.chunk.js.map