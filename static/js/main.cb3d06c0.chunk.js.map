{"version":3,"sources":["slices/PostsSlice.ts","posts/PostAddFrom.tsx","posts/SinglePost.tsx","common/common.tsx","posts/Posts.tsx","slices/CommentsSlice.ts","store.ts","controls/ControlsComponent.tsx","header/Header.tsx","postdetail/Comments.tsx","postdetail/PostDetail.tsx","about/About.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["LoadingStatus","postsEntityAdapter","createEntityAdapter","sortComparer","a","b","id","initialState","getInitialState","postsStatus","IDLE","fetchPosts","createAsyncThunk","_","thunkAPI","fetch","result","json","putUpdatedPost","post","method","body","JSON","stringify","headers","postsSlice","createSlice","name","reducers","addPost","state","action","max","ids","reduce","prev","current","payload","addOne","deletePost","removeOne","updatePost","upsertOne","extraReducers","builder","addCase","pending","LOADING","fulfilled","READY","upsertMany","actions","postSelectors","getSelectors","posts","PostAddFrom","setCreationMode","dispatch","useDispatch","emptyPost","title","useState","modifyPost","Form","FormGroup","Label","for","Input","type","placeholder","value","onChange","e","prevState","target","Button","onClick","color","SinglePost","currentPost","setCurrentPost","history","useHistory","useEffect","Card","className","CardBody","CardText","tag","push","spinner","Spinner","Posts","useSelector","postsSelection","selectAll","creationMode","map","commentEntityAdapter","loadingStatus","fetchPostComments","response","commentsSlice","commentsSelector","comments","store","configureStore","reducer","useAppDispatch","ControlsComponent","goBack","icon","faLongArrowAltLeft","size","faSync","Header","postsState","selectIds","Navbar","expand","Nav","navbar","NavItem","NavLink","Link","to","NavbarText","length","Comments","useParams","filter","postId","commentsLoadingStatus","CardTitle","CardSubtitle","email","PostDetail","selectById","editMode","setEditMode","setTitle","setBody","CardHeader","About","Badge","App","Container","Row","Col","exact","path","component","process","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.cb3d06c0.chunk.js","sourcesContent":["import {\r\n  createAsyncThunk,\r\n  createEntityAdapter,\r\n  createSlice,\r\n  PayloadAction,\r\n} from \"@reduxjs/toolkit\";\r\nimport { RootState } from \"../store\";\r\n\r\nexport interface Post {\r\n  id: number;\r\n  title: string;\r\n  body: string;\r\n}\r\n\r\nexport enum LoadingStatus {\r\n  IDLE = \"idle\",\r\n  LOADING = \"loading\",\r\n  READY = \"ready\",\r\n  ERROR = \"error\",\r\n}\r\n\r\nconst postsEntityAdapter = createEntityAdapter<Post>({\r\n  sortComparer(a, b) {\r\n    return b.id - a.id;\r\n  },\r\n});\r\nconst initialState = postsEntityAdapter.getInitialState({\r\n  postsStatus: LoadingStatus.IDLE,\r\n});\r\n\r\nexport const fetchPosts = createAsyncThunk(\r\n  \"Posts/fetchPosts\",\r\n  async (_, thunkAPI) => {\r\n    const result = await fetch(\r\n      \"https://jsonplaceholder.typicode.com/posts/?userId=1\"\r\n    );\r\n    return (await result.json()) as Post[];\r\n  }\r\n);\r\n\r\nexport const putUpdatedPost = createAsyncThunk(\r\n  \"Posts/updatePost\",\r\n  async (post: Post) => {\r\n    const result = await fetch(\r\n      `https://jsonplaceholder.typicode.com/posts/${post.id}`,\r\n      {\r\n        method: \"PUT\",\r\n        body: JSON.stringify(post),\r\n        headers: {\r\n          \"Content-type\": \"application/json; charset=UTF-8\",\r\n        },\r\n      }\r\n    );\r\n    return (await result.json()) as Post;\r\n  }\r\n);\r\n\r\nexport const postsSlice = createSlice({\r\n  name: \"Posts\",\r\n  initialState,\r\n  reducers: {\r\n    addPost: (state, action: PayloadAction<Post>) => {\r\n      const max = state.ids.reduce((prev, current) =>\r\n        prev > current ? prev : current\r\n      );\r\n      action.payload.id = +max + 1;\r\n      postsEntityAdapter.addOne(state, action.payload);\r\n    },\r\n    deletePost: (state, action: PayloadAction<number>) => {\r\n      postsEntityAdapter.removeOne(state, action.payload);\r\n    },\r\n    updatePost: (state, action: PayloadAction<Post>) => {\r\n      postsEntityAdapter.upsertOne(state, action.payload);\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(fetchPosts.pending, (state) => {\r\n        state.postsStatus = LoadingStatus.LOADING;\r\n      })\r\n      .addCase(fetchPosts.fulfilled, (state, action) => {\r\n        state.postsStatus = LoadingStatus.READY;\r\n        postsEntityAdapter.upsertMany(state, action.payload);\r\n      })\r\n      .addCase(putUpdatedPost.fulfilled, (state, action) => {\r\n        state.postsStatus = LoadingStatus.READY;\r\n        postsEntityAdapter.upsertOne(state, action.payload);\r\n      });\r\n  },\r\n});\r\n\r\nexport const { addPost, deletePost, updatePost } = postsSlice.actions;\r\nexport const postSelectors = postsEntityAdapter.getSelectors<RootState>(\r\n  (state) => state.posts\r\n);\r\n","// @flow\r\nimport * as React from \"react\";\r\nimport { Dispatch, FC, useState } from \"react\";\r\nimport { Button, Form, FormGroup, Input, Label } from \"reactstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addPost, Post } from \"../slices/PostsSlice\";\r\n\r\ninterface PostAddFromProps {\r\n  setCreationMode: Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nexport const PostAddFrom: FC<PostAddFromProps> = ({ setCreationMode }) => {\r\n  const dispatch = useDispatch();\r\n  const emptyPost: Post = { id: 0, title: \"\", body: \"\" };\r\n  const [post, modifyPost] = useState<Post>(emptyPost);\r\n\r\n  return (\r\n    <div>\r\n      <Form>\r\n        <FormGroup>\r\n          <Label for=\"title\">Title</Label>\r\n          <Input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            placeholder=\"Enter title\"\r\n            value={post.title}\r\n            onChange={(e) =>\r\n              modifyPost((prevState) => {\r\n                return { ...prevState, title: e.target.value };\r\n              })\r\n            }\r\n          />\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <Label for=\"text\">Text</Label>\r\n          <Input\r\n            type=\"text\"\r\n            name=\"text\"\r\n            placeholder=\"Enter text\"\r\n            value={post.body}\r\n            onChange={(e) =>\r\n              modifyPost((prevState) => {\r\n                return { ...prevState, body: e.target.value };\r\n              })\r\n            }\r\n          />\r\n        </FormGroup>\r\n        <Button\r\n          onClick={() => {\r\n            dispatch(addPost(post));\r\n            setCreationMode(false);\r\n            modifyPost(() => emptyPost);\r\n          }}\r\n          color=\"primary\"\r\n        >\r\n          Add post\r\n        </Button> {' '}\r\n        <Button onClick={() => setCreationMode(false)} color=\"dark\">\r\n          Cancel\r\n        </Button>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Card, CardBody, CardText } from \"reactstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { deletePost, Post } from \"../slices/PostsSlice\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\ninterface SinglePostProps {\r\n  post: Post;\r\n}\r\n\r\nconst SinglePost: React.FC<SinglePostProps> = ({ post }) => {\r\n  const [currentPost, setCurrentPost] = useState<Post>(post);\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    setCurrentPost(post);\r\n  }, [post]);\r\n\r\n  return (\r\n    <Card className='border-0 m-2' body color=\"light\">\r\n      <CardBody>\r\n        <CardText tag={\"h5\"}>{currentPost.title}</CardText>\r\n        <CardText tag={\"p\"}>{currentPost.body}</CardText>\r\n        <Button onClick={() => dispatch(deletePost(post.id))} color=\"danger\">\r\n          Delete{\" \"}\r\n        </Button>{\" \"}\r\n        <Button\r\n          onClick={() => {\r\n            history.push(`post/${post.id}`);\r\n          }}\r\n        >\r\n          Edit post\r\n        </Button>\r\n      </CardBody>\r\n    </Card>\r\n  );\r\n};\r\n\r\n\r\nexport default SinglePost;\r\n","import { Spinner } from \"reactstrap\";\r\nimport * as React from \"react\";\r\n\r\nexport const spinner = () => <Spinner type=\"grow\" color=\"dark\" />;\r\n","// @flow\r\nimport * as React from \"react\";\r\nimport { PostAddFrom } from \"./PostAddFrom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"../store\";\r\nimport SinglePost from \"./SinglePost\";\r\nimport { LoadingStatus, postSelectors } from \"../slices/PostsSlice\";\r\nimport { spinner } from \"../common/common\";\r\nimport { Button } from \"reactstrap\";\r\nimport { useState } from \"react\";\r\n\r\nexport function Posts() {\r\n  const postsStatus = useSelector(\r\n    (state: RootState) => state.posts.postsStatus\r\n  );\r\n  const postsSelection = useSelector((state: RootState) =>\r\n    postSelectors.selectAll(state)\r\n  );\r\n  const [creationMode, setCreationMode] = useState(false);\r\n\r\n  let posts = postsSelection.map((post) => {\r\n    return <SinglePost post={post} key={post.id} />;\r\n  });\r\n  return (\r\n    <div>\r\n      {!creationMode && (\r\n        <>\r\n          <Button onClick={() => setCreationMode(true)} color=\"primary\">\r\n            Create new post\r\n          </Button>\r\n        </>\r\n      )}\r\n      {creationMode && (\r\n        <div className=\"mb-2\">\r\n          <PostAddFrom setCreationMode={setCreationMode} />\r\n        </div>\r\n      )}\r\n      <div className=\"mb-2\">\r\n        {postsStatus === LoadingStatus.LOADING ? spinner() : posts}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  createAsyncThunk,\r\n  createEntityAdapter,\r\n  createSlice,\r\n} from \"@reduxjs/toolkit\";\r\nimport { RootState } from \"../store\";\r\nimport { LoadingStatus } from \"./PostsSlice\";\r\n\r\nexport interface Comment {\r\n  postId: number;\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n  body: string;\r\n}\r\n\r\nconst commentEntityAdapter = createEntityAdapter<Comment>();\r\n\r\nconst initialState = commentEntityAdapter.getInitialState({\r\n  loadingStatus: LoadingStatus.IDLE,\r\n});\r\n\r\nexport const fetchPostComments = createAsyncThunk(\r\n  \"fetchPostComments\",\r\n  async (id: string) => {\r\n    const response = await fetch(\r\n      `https://jsonplaceholder.typicode.com/comments?postId=${id}`\r\n    );\r\n    return (await response.json()) as Comment[];\r\n  }\r\n);\r\n\r\nexport const commentsSlice = createSlice({\r\n  name: \"comments\",\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchPostComments.pending, (state) => {\r\n      state.loadingStatus = LoadingStatus.LOADING;\r\n    });\r\n    builder.addCase(fetchPostComments.fulfilled, (state, action) => {\r\n      commentEntityAdapter.upsertMany(state, action.payload);\r\n      state.loadingStatus = LoadingStatus.READY;\r\n    });\r\n  },\r\n});\r\n\r\nexport const commentsSelector = commentEntityAdapter.getSelectors<RootState>(\r\n  (state) => state.comments\r\n);\r\n","import { Action, configureStore } from '@reduxjs/toolkit';\r\nimport { useDispatch } from 'react-redux';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { postsSlice } from './slices/PostsSlice';\r\nimport { commentsSlice } from './slices/CommentsSlice';\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    posts: postsSlice.reducer,\r\n    comments: commentsSlice.reducer,\r\n  },\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppThunk<ReturnType = void> = ThunkAction<ReturnType,\r\n  RootState,\r\n  unknown,\r\n  Action<string>>;\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\n","import React from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faLongArrowAltLeft, faSync } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useAppDispatch } from \"../store\";\r\nimport { fetchPosts } from \"../slices/PostsSlice\";\r\n\r\nconst ControlsComponent = () => {\r\n  const history = useHistory();\r\n  const dispatch = useAppDispatch();\r\n\r\n  const reload = () => {\r\n    dispatch(fetchPosts());\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button onClick={() => history.goBack()}>\r\n        <FontAwesomeIcon icon={faLongArrowAltLeft} size=\"1x\" />\r\n      </Button>{\" \"}\r\n      <Button onClick={() => reload()} className=\"\">\r\n        <FontAwesomeIcon icon={faSync} size=\"1x\" />\r\n      </Button>\r\n      <br />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ControlsComponent;\r\n","// @flow\r\nimport * as React from \"react\";\r\nimport { Nav, Navbar, NavbarText, NavItem, NavLink } from \"reactstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"../store\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ControlsComponent from \"../controls/ControlsComponent\";\r\nimport { postSelectors } from \"../slices/PostsSlice\";\r\n\r\nexport function Header() {\r\n  const postsState = useSelector((state: RootState) =>\r\n    postSelectors.selectIds(state)\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Navbar color=\"light\" expand=\"md\" className=\"mb-3\">\r\n        <Nav className=\"mr-auto\" navbar>\r\n          <NavItem className=\"mr-auto\">\r\n            <NavLink tag={Link} to=\"/posts\">\r\n              Posts\r\n            </NavLink>\r\n          </NavItem>\r\n          <NavItem className=\"mr-auto\">\r\n            <NavLink tag={Link} to=\"/about\">\r\n              About\r\n            </NavLink>\r\n          </NavItem>\r\n        </Nav>\r\n        <ControlsComponent />\r\n        <NavbarText className=\"pl-3\">\r\n          Total posts: {postsState.length}\r\n        </NavbarText>\r\n      </Navbar>\r\n    </>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { commentsSelector, fetchPostComments } from \"../slices/CommentsSlice\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState, useAppDispatch } from \"../store\";\r\nimport { Card, CardBody, CardSubtitle, CardText, CardTitle } from \"reactstrap\";\r\nimport { LoadingStatus } from \"../slices/PostsSlice\";\r\nimport { spinner } from \"../common/common\";\r\n\r\nconst Comments = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const comments = useSelector((state: RootState) =>\r\n    commentsSelector.selectAll(state).filter((value) => value.postId === +id)\r\n  );\r\n  const dispatch = useAppDispatch();\r\n  const commentsLoadingStatus = useSelector(\r\n    (state: RootState) => state.comments.loadingStatus\r\n  );\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchPostComments(id));\r\n  }, []);\r\n\r\n  const renderComments = () =>\r\n    comments.map((value) => (\r\n      <Card body className=\"text-left m-2 border-0\" color=\"light\">\r\n        <CardBody>\r\n          <CardTitle tag=\"h6\">{value.name}</CardTitle>\r\n          <CardSubtitle>{value.email}</CardSubtitle>\r\n          <CardText>{value.body}</CardText>\r\n        </CardBody>\r\n      </Card>\r\n    ));\r\n\r\n  return (\r\n    <div>\r\n      <h4 className=\"\">\r\n        Comments {commentsLoadingStatus !== LoadingStatus.READY && spinner()}\r\n      </h4>\r\n      {renderComments()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  CardText,\r\n  CardTitle,\r\n  Input,\r\n} from \"reactstrap\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState, useAppDispatch } from \"../store\";\r\nimport { postSelectors, putUpdatedPost } from \"../slices/PostsSlice\";\r\nimport Comments from \"./Comments\";\r\n\r\nconst PostDetail = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const currentPost = useSelector((state: RootState) =>\r\n    postSelectors.selectById(state, id)\r\n  );\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [body, setBody] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setTitle(currentPost?.title || \"\");\r\n    setBody(currentPost?.body || \"\");\r\n  }, [currentPost]);\r\n\r\n  const viewContent = () => (\r\n    <CardBody>\r\n      <CardTitle tag=\"h5\">{currentPost?.title}</CardTitle>\r\n      <CardText>{currentPost?.body}</CardText>\r\n      <Button color=\"primary\" onClick={() => setEditMode(true)}>\r\n        Edit\r\n      </Button>\r\n    </CardBody>\r\n  );\r\n\r\n  const editContent = () => (\r\n    <CardBody>\r\n      <Input\r\n        className=\"m-2\"\r\n        value={title}\r\n        onChange={(e) => setTitle(e.target.value)}\r\n      >\r\n        {currentPost?.title}\r\n      </Input>\r\n      <Input\r\n        className=\"m-2\"\r\n        value={body}\r\n        onChange={(e) => setBody(e.target.value)}\r\n      >\r\n        {currentPost?.body}\r\n      </Input>\r\n      <Button\r\n        className=\"m-2\"\r\n        color=\"primary\"\r\n        onClick={() => {\r\n          dispatch(putUpdatedPost({ ...currentPost!, title, body }));\r\n          setEditMode(false);\r\n        }}\r\n      >\r\n        Save\r\n      </Button>\r\n      <Button\r\n        className=\"m-2\"\r\n        color=\"dark\"\r\n        onClick={() => {\r\n          setEditMode(false);\r\n          setTitle(currentPost?.title!);\r\n          setBody(currentPost?.body!);\r\n        }}\r\n      >\r\n        Cancel\r\n      </Button>\r\n    </CardBody>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <Card className=\"bg-white mb-4 text-left\">\r\n        <CardHeader>Post {id}</CardHeader>\r\n        {!editMode ? viewContent() : editContent()}\r\n      </Card>\r\n      <Comments />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostDetail;\r\n","import React from \"react\";\r\nimport { Badge } from \"reactstrap\";\r\n\r\nconst About = () => {\r\n  return (\r\n    <div>\r\n      <h1>React playground</h1>\r\n      <p>Welcome to my react playground</p>\r\n      <p>\r\n        Built using\r\n        <Badge>react</Badge>\r\n        <Badge>typescript</Badge>\r\n        <Badge>redux</Badge>\r\n        <Badge>redux toolkit</Badge>\r\n        <Badge>reactstrap</Badge>\r\n      </p>\r\n      <footer>Dmitry Avgustis 2021</footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default About;\r\n","import React, { useEffect } from \"react\";\nimport \"./App.css\";\nimport { Posts } from \"./posts/Posts\";\nimport { Header } from \"./header/Header\";\nimport { Col, Container, Row } from \"reactstrap\";\nimport { HashRouter, Redirect, Route, Switch } from \"react-router-dom\";\nimport PostDetail from \"./postdetail/PostDetail\";\nimport { useSelector } from \"react-redux\";\nimport { RootState, useAppDispatch } from \"./store\";\nimport { fetchPosts, LoadingStatus } from \"./slices/PostsSlice\";\nimport About from \"./about/About\";\n\nfunction App() {\n  const dispatch = useAppDispatch();\n  const postsStatus = useSelector(\n    (state: RootState) => state.posts.postsStatus\n  );\n\n  useEffect(() => {\n    (async () => {\n      if (postsStatus === LoadingStatus.IDLE) {\n        await dispatch(fetchPosts());\n      }\n    })();\n  }, [postsStatus]);\n\n  return (\n    <div className=\"App\">\n      <Header />\n      <Container className=\"container container-lg\">\n        <Row>\n          <Col className=\"\">\n            <Switch>\n              <Route exact path=\"/\">\n                <Redirect to=\"/about\" />\n              </Route>\n              <Route path=\"/posts\" component={Posts} />\n              <Route exact path=\"/post/:id\" component={PostDetail} />\n              <Route path=\"/about\" component={About} />\n            </Switch>\n          </Col>\n        </Row>\n      </Container>\n      <footer>Dmitry Avgustis 2021 {process.env.REACT_APP_TEST}</footer>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { store } from \"./store\";\nimport { Provider } from \"react-redux\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { HashRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}